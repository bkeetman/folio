<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Folio Downloads</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <main class="page">
      <header class="hero">
        <div class="hero-logo">
          <img src="folio-icon.png" alt="Folio" />
        </div>
        <div>
          <p class="eyebrow">Folio Desktop</p>
          <h1>Download Folio</h1>
          <p class="version" id="release-version">Latest release</p>
          <p class="lede">
            A calm, local library for people with folders full of ebooks who want a clean, organized shelf.
          </p>
        </div>
      </header>

      <section class="overview">
        <div class="overview-card">
          <h3>What it does</h3>
          <p>
            Folio scans your ebook folders, extracts metadata, and gives you a gentle interface to clean up titles,
            authors, covers, and duplicates.
          </p>
        </div>
        <div class="overview-card">
          <h3>How it works</h3>
          <p>
            Point it at a folder, review matches, and apply changes. You decide what gets renamed or written into files.
          </p>
        </div>
        <div class="overview-card">
          <h3>Ideal for</h3>
          <p>
            Longâ€‘term ebook collectors who want stable filenames, consistent metadata, and a quiet library view.
          </p>
        </div>
      </section>

      <section class="downloads" id="downloads">
        <a class="card" data-platform="darwin-aarch64" href="https://github.com/bkeetman/folio/releases/latest" target="_blank" rel="noreferrer">
          <h2>macOS</h2>
          <p class="card-subtitle">Download the latest .dmg from GitHub Releases.</p>
          <p class="card-version" data-version>Latest</p>
        </a>
        <a class="card" data-platform="windows-x86_64" href="https://github.com/bkeetman/folio/releases/latest" target="_blank" rel="noreferrer">
          <h2>Windows</h2>
          <p class="card-subtitle">Download the latest .msi or .exe from GitHub Releases.</p>
          <p class="card-version" data-version>Latest</p>
        </a>
        <a class="card" data-platform="linux-x86_64" href="https://github.com/bkeetman/folio/releases/latest" target="_blank" rel="noreferrer">
          <h2>Linux</h2>
          <p class="card-subtitle">Download the latest .deb or .AppImage from GitHub Releases.</p>
          <p class="card-version" data-version>Latest</p>
        </a>
      </section>

      <section class="notes">
        <h3>Notes</h3>
        <ul>
          <li>Downloads are served from GitHub Releases.</li>
          <li>macOS builds should be signed and notarized for best UX.</li>
        </ul>
      </section>
    </main>
    <script>
      const versionEl = document.getElementById("release-version");
      const cards = Array.from(document.querySelectorAll("[data-platform]"));

      fetch("latest.json", { cache: "no-store" })
        .then((res) => (res.ok ? res.json() : null))
        .then((data) => {
          if (!data) return;
          if (versionEl) {
            versionEl.textContent = `Latest release: v${data.version}`;
          }
          cards.forEach((card) => {
            const platform = card.getAttribute("data-platform");
            const platformInfo = data.platforms?.[platform];
            if (platformInfo?.url) {
              card.setAttribute("href", platformInfo.url);
            }
            const versionLabel = card.querySelector("[data-version]");
            if (versionLabel) {
              versionLabel.textContent = `v${data.version}`;
            }
          });
        })
        .catch(() => {});
    </script>
  </body>
</html>
